<app-navbar></app-navbar>
<div class="container mt-4">
  <button class="btn btn-primary" [routerLink]="['/home']">Volver atrás</button>
  <h1 class="mt-4">Costeo de producto</h1>

  <!-- Selección de Planta -->
  <h5 class="mt-4">Seleccione planta</h5>
  <div class="row mt-5">
    <div class="col text-center" *ngFor="let planta of plantas">
      <button class="btn btn-primary" (click)="seleccionarPlanta(planta.id)">
        {{ planta.nombre }}
      </button>
    </div>
  </div>

  <!-- Input para ID de producto y botón de costeo -->
  <div *ngIf="plantaSeleccionada" class="mt-4">
    <label>Costear producto en {{ nombrePlantaSeleccionada }}</label>
    <input type="number" [(ngModel)]="idProducto" placeholder="Ingresa el ID del producto" class="form-control mb-3"/>
    <button class="btn btn-success" (click)="costearProducto()">Costear Producto</button>
  </div>

  <!-- Tabla para mostrar la dosificación -->
  <div *ngIf="dosificacion" class="mt-4">
    <h5>Dosificación para el producto {{ idProducto }} en {{ nombrePlantaSeleccionada }}</h5>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Cemento</th>
          <th>Agua Total</th>
          <th>Arena</th>
          <th>Gravilla</th>
          <th>Aditivo 1 (base)</th>
          <th>Aditivo 2 {{nombreAditivo2}}</th>
          <th>Aditivo 3 {{nombreAditivo3}}</th>
          <th>Aditivo 4 {{nombreAditivo4}}</th>
          <th>Aditivo 5 {{nombreAditivo5}}</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ dosificacion.cemento }}</td>
          <td>{{ dosificacion.aguaTotal }}</td>
          <td>{{ dosificacion.arena }}</td>
          <td>{{ dosificacion.gravilla }}</td>
          <td>{{ dosificacion.aditivo1 }}</td>
          <td>{{ dosificacion.aditivo2 }}</td>
          <td>{{ dosificacion.aditivo3 }}</td>
          <td>{{ dosificacion.aditivo4 }}</td>
          <td>{{ dosificacion.aditivo5 }}</td>
          <td>{{ dosificacion.descripcion }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Mensaje si no se encuentra dosificación -->
  <div *ngIf="!dosificacion && idProducto" class="alert alert-warning mt-4">
    No se encontró la dosificación para este producto en la planta seleccionada.
  </div>

  <div *ngIf="dosificacion">
    <h2>Detalles del Cálculo de Costeo</h2>

    <p><strong>Costo de Cemento:</strong> {{ costoCemento | number: '1.2-2' }} </p>
    <p><strong>Costo de Agua:</strong> {{ costoAgua | number: '1.2-2' }} </p>
    <p><strong>Costo de Arena:</strong> {{ costoArena | number: '1.2-2' }} </p>
    <p><strong>Costo de Gravilla:</strong> {{ costoGravilla | number: '1.2-2' }} </p>
    <!--<p><strong>Costo de Grava:</strong> {{ costoGrava | number: '1.2-2' }} </p>-->
    <p><strong>Costo aditivo base:</strong> {{costoAditivoBase | number:'1.2-2'}}</p>

    <p><strong>Costo Final (dividido por UF):</strong> {{ costoFinal | number: '1.2-2' }} </p>
    <p><strong>Costo de los aridos:</strong> {{costoAridos}}</p>
  </div>

  <!-- Cemento (no se realiza división por densidad) -->
<!-- Cemento -->













</div>
